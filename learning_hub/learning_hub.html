<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Hub</title>
    
    <!-- Load Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Tone.js for Sound -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>

    <style>
        /* Custom arcade theme styles */
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: #1a1a1a;
            background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 15px 15px;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Flicker animation for the title */
        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% {
                text-shadow: 0 0 4px #fff, 0 0 11px #fff, 0 0 19px #fff, 0 0 40px #0ff, 0 0 80px #0ff, 0 0 90px #0ff, 0 0 100px #0ff, 0 0 150px #0ff;
            }
            20%, 24%, 55% {
                text-shadow: none;
            }
        }

        /* Arcade title style */
        .arcade-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 2.5rem; /* 40px */
            color: #f0f0f0;
            animation: flicker 1.5s infinite alternate;
        }
        
        @media (min-width: 640px) {
            .arcade-title {
                font-size: 3.5rem; /* 56px */
            }
        }

        /* Content container style */
        .content-container {
            border: 4px solid #00c6ff;
            border-radius: 16px;
            background-color: rgba(16, 16, 16, 0.8);
            box-shadow: 0 0 25px #00c6ff, 0 0 40px #007bff, inset 0 0 10px #00c6ff;
            backdrop-filter: blur(5px);
            width: 100%;
            max-width: 1000px;
            margin: 20px;
        }

        /* Styling for the grade selection buttons */
        .grade-button {
            background-color: #007bff;
            color: #ffffff;
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            padding: 2rem 1.5rem;
            min-width: 200px;
            min-height: 160px;
            text-align: center;
            border: 4px solid #00c6ff;
            border-radius: 16px;
            text-shadow: 0 0 3px #fff, 0 0 8px #fff, 0 0 12px #00c6ff;
            box-shadow: 0 0 10px #00c6ff, 0 0 15px #00c6ff, 0 0 25px #007bff, inset 0 0 5px #00c6ff;
            transition: all 0.2s ease;
            cursor: pointer;
            margin: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .grade-button:hover {
            transform: scale(1.05) translateY(-3px);
            box-shadow: 0 0 15px #00c6ff, 0 0 25px #00c6ff, 0 0 40px #007bff, inset 0 0 10px #00c6ff;
            background-color: #008cff;
        }
        
        /* "Video Game Style" selected button */
        .grade-button.active {
            background-color: #008cff;
            border-color: #F8D800; /* Yellow border */
            color: #f0f0f0;
            text-shadow: 0 0 3px #fff, 0 0 8px #F8D800, 0 0 12px #F8D800;
            box-shadow: 0 0 10px #F8D800, 0 0 20px #F8D800, 0 0 35px #F8D800, inset 0 0 8px #F8D800; /* Yellow glow */
            transform: scale(1.03);
        }

        .grade-button.active:hover {
            background-color: #0099ff;
            transform: scale(1.07) translateY(-3px);
            box-shadow: 0 0 15px #F8D800, 0 0 25px #F8D800, 0 0 45px #F8D800, inset 0 0 10px #F8D800;
        }

        /* Keyboard navigation focus - Yellow outline */
        .grade-button.focused {
            outline: 4px solid #F8D800; /* Bright yellow */
            outline-offset: 4px;
            background-color: #008cff; /* Match hover bg for clarity */
        }

        /* Style for the icon inside the button */
        .grade-icon {
            font-size: 3rem; /* Larger icon size */
            margin-bottom: 0.5rem; /* Space between icon and text */
            line-height: 1; /* Ensure icon doesn't add extra height */
        }

    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div class="container mx-auto">
        
        <!-- Header Section -->
        <header class="text-center my-8 sm:my-12">
            <!-- Flickering Arcade Title -->
            <h1 class="arcade-title flicker">LEARNING HUB</h1>
            <p class="text-lg text-gray-300 mt-4" style="font-family: 'Press Start 2P', cursive; font-size: 0.875rem;">Select Your Grade To Start</p>
        </header>

        <!-- Main Content Area -->
        <main class="content-container p-6 sm:p-10">
            
            <!-- Grade Selection Section -->
            <section id="grade-selection">
                <h2 class="text-2xl font-semibold mb-6 text-center text-yellow-300" style="font-family: 'Press Start 2P', cursive; font-size: 1rem;">SELECT GRADE</h2>
                <!-- Container for Grade Buttons -->
                <div id="grade-buttons" class="flex flex-wrap justify-center">
                    <!-- Buttons will be dynamically added here -->
                </div>
            </section>

        </main>
    </div>

        <script>
        const gradeButtonsContainer = document.getElementById('grade-buttons');
        const grades = [
            { text: "JK", icon: "👾" },
            { text: "SK", icon: "🚀" },
            { text: "Grade 1", icon: "⭐" },
            { text: "Grade 2", icon: "🎮" },
            { text: "Grade 3", icon: "💎" },
            { text: "Grade 4", icon: "🕹️" },
            { text: "Grade 5", icon: "🤖" },
            { text: "Grade 6", icon: "👽" },
            { text: "Grade 7", icon: "🧑‍🚀" },
            { text: "Grade 8", icon: "👑" }
        ];
        let selectedGrade = "JK"; // Default to JK
        
        let currentIndex = 0;
        let buttons = [];
        let audioInitialized = false; // Flag to track if audio context is started

        // --- Sound Effects Setup ---
        let moveSound, selectSound;

        // Initialize sounds (called on first user interaction)
        async function initializeAudio() {
            await Tone.start();
            console.log('Audio context started');

            // Sound for moving selection
            moveSound = new Tone.Synth({
                oscillator: { type: 'sawtooth' }, // Buzzy arcade sound
                envelope: { attack: 0.01, decay: 0.1, sustain: 0.1, release: 0.1 }
            }).toDestination();
            moveSound.volume.value = -15; // Quieter sound

            // Sound for selecting an item
            selectSound = new Tone.Synth({
                oscillator: { type: 'square' }, // Another classic arcade sound
                envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.2 }
            }).toDestination();
            selectSound.volume.value = -10; // Slightly louder

            audioInitialized = true;
        }

        // Play move sound
        function playMoveSound() {
            if (!audioInitialized) return;
            moveSound.triggerAttackRelease('C5', '16n'); // Higher pitch blip
        }

        // Play select sound
        function playSelectSound() {
            if (!audioInitialized) return;
            selectSound.triggerAttackRelease('G4', '8n'); // Lower pitch confirm
        }
        
        // --- Button Display and Selection Logic ---

        // Function to create and display grade buttons
        function displayGradeButtons() {
            gradeButtonsContainer.innerHTML = ''; // Clear existing buttons
            grades.forEach((gradeData, index) => {
                const button = document.createElement('button');
                button.className = 'grade-button';
                
                // Create icon element
                const icon = document.createElement('span');
                icon.className = 'grade-icon';
                icon.textContent = gradeData.icon;
                button.appendChild(icon);

                // Create text element
                const text = document.createElement('span');
                text.textContent = gradeData.text;
                button.appendChild(text);

                if (gradeData.text === selectedGrade) {
                    button.classList.add('active');
                }
                button.onclick = () => {
                     // Initialize audio on first click if not already done
                    if (!audioInitialized) {
                        initializeAudio().then(() => {
                            selectGrade(gradeData.text); // Select after audio is ready
                            playSelectSound();
                        });
                    } else {
                        selectGrade(gradeData.text);
                        playSelectSound();
                    }
                };
                gradeButtonsContainer.appendChild(button);
            });
             buttons = gradeButtonsContainer.getElementsByClassName('grade-button'); // Update buttons array
             updateFocusStyleOnly(); // Ensure the currently focused button has the style
        }

        // Function to handle grade selection (via click or Enter)
        function selectGrade(gradeText) {
            selectedGrade = gradeText;
            displayGradeButtons(); // Re-render buttons to update active state

            // Update currentIndex based on the newly selected grade
             let newFocusIndex = grades.findIndex(grade => grade.text === gradeText);
             if (newFocusIndex !== -1) {
                currentIndex = newFocusIndex;
             }
             updateFocusStyleOnly(); // Apply focus style immediately
        }

        // --- Keyboard Navigation ---

        // Function to update visual focus style without playing sound or changing selection
        function updateFocusStyleOnly() {
             if (buttons.length === 0) return;
             // Remove focus from all buttons first
             for (let i = 0; i < buttons.length; i++) {
                 buttons[i].classList.remove('focused');
             }
             // Add focus to the current button
             if (currentIndex >= 0 && currentIndex < buttons.length) {
                buttons[currentIndex].classList.add('focused');
                buttons[currentIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }


        // Function to update keyboard focus index and style
        function updateFocus(newIndex) {
            if (buttons.length === 0) return;

            // Calculate number of columns dynamically for Up/Down navigation
            let numColumns = 1;
            if (buttons.length > 0) {
                const firstButton = buttons[0];
                const buttonRect = firstButton.getBoundingClientRect();
                const containerWidth = gradeButtonsContainer.clientWidth;
                const buttonOuterWidth = buttonRect.width + (15 * 2); // Button width + margins (15px * 2)
                if (buttonOuterWidth > 0) {
                    numColumns = Math.max(1, Math.floor(containerWidth / buttonOuterWidth));
                }
            }


            // Handle wrapping
             let proposedIndex = newIndex;
             if (proposedIndex < 0) {
                // If moving up/left from the first row/column
                 if (currentIndex < numColumns && newIndex === currentIndex - numColumns) { // Trying to move up from top row
                     proposedIndex = buttons.length - (buttons.length % numColumns) + (currentIndex % numColumns); // Go to last row, same column
                     if (proposedIndex >= buttons.length) proposedIndex -= numColumns; // Adjust if last row isn't full
                 } else if (currentIndex % numColumns === 0 && newIndex === currentIndex - 1) { // Trying to move left from first column
                     proposedIndex = currentIndex + numColumns - 1; // Go to end of same row
                     if (proposedIndex >= buttons.length) proposedIndex = buttons.length - 1; // Adjust if at the very end
                 } else {
                     proposedIndex = buttons.length -1; // Default wrap to end
                 }

             } else if (proposedIndex >= buttons.length) {
                 // If moving down/right from the last row/column
                 if (currentIndex >= buttons.length - numColumns && newIndex === currentIndex + numColumns) { // Trying to move down from last row
                      proposedIndex = currentIndex % numColumns; // Go to first row, same column
                 } else if ((currentIndex + 1) % numColumns === 0 && newIndex === currentIndex + 1) { // Trying to move right from last column
                      proposedIndex = currentIndex - (numColumns - 1); // Go to start of same row
                 } else {
                      proposedIndex = 0; // Default wrap to start
                 }
             }

             // Ensure index stays within bounds after complex wrapping calculation
             if (proposedIndex < 0) proposedIndex = buttons.length - 1;
             if (proposedIndex >= buttons.length) proposedIndex = 0;


            if (proposedIndex !== currentIndex) {
                 currentIndex = proposedIndex;
                 updateFocusStyleOnly();
                 playMoveSound(); // Play sound only when index actually changes
             }
        }

        // Keyboard navigation event listener
        window.addEventListener('keydown', (e) => {
             // Initialize audio on first key press if not already done
             if (!audioInitialized) {
                 initializeAudio();
             }

            if (buttons.length === 0) return;

            // Calculate number of columns for Up/Down navigation (re-calculated on keydown for responsiveness)
            let numColumns = 1;
            if (buttons.length > 0) {
                const firstButton = buttons[0];
                const buttonRect = firstButton.getBoundingClientRect();
                const containerWidth = gradeButtonsContainer.clientWidth;
                const buttonOuterWidth = buttonRect.width + (15 * 2); 
                if (buttonOuterWidth > 0) {
                    numColumns = Math.max(1, Math.floor(containerWidth / buttonOuterWidth));
                }
            }

            switch (e.key) {
                case 'ArrowLeft':
                    e.preventDefault();
                    updateFocus(currentIndex - 1);
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    updateFocus(currentIndex + 1);
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    updateFocus(currentIndex - numColumns);
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    updateFocus(currentIndex + numColumns);
                    break;
                case 'Enter':
                case ' ': // Spacebar
                    e.preventDefault();
                    buttons[currentIndex].click(); // Trigger the click handler which includes sound
                    break;
                default:
                    return; // Ignore other keys
            }
        });


        // Initial setup
        function init() {
            displayGradeButtons(); // Display buttons first
            
            // Set initial focus based on selectedGrade
            currentIndex = grades.findIndex(grade => grade.text === selectedGrade);
            if (currentIndex < 0) { // Fallback if selectedGrade isn't found
                currentIndex = 0;
            }
            updateFocusStyleOnly(); // Apply initial focus style
        }

        // Run the app on window load
        window.onload = init;

    </script>
</body>
</html>

